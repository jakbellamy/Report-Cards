{"ast":null,"code":"import _slicedToArray from \"/Users/jakobbellamy/Dev/refactor/Report-Cards/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jakobbellamy/Dev/refactor/Report-Cards/src/src/views/auth/LoginView/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport Cookies from 'js-cookie';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { useHistory } from 'react-router';\nimport { Avatar, Button, Box, Container, Card, CardContent, CardMedia, Divider, Link, Typography, colors, makeStyles } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport LockIcon from '@material-ui/icons/Lock';\nimport Page from 'src/src/components/Page';\nimport OPEN_Logo from 'src/src/components/OPEN_Logo';\nimport LoginForm from './LoginForm';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      justifyContent: 'center',\n      backgroundColor: theme.palette.background.dark,\n      display: 'flex',\n      height: '100%',\n      minHeight: '100%',\n      flexDirection: 'column',\n      paddingBottom: 80,\n      paddingTop: 80\n    },\n    backButton: {\n      marginLeft: theme.spacing(2)\n    },\n    card: {\n      overflow: 'visible',\n      display: 'flex',\n      position: 'relative',\n      '& > *': {\n        flexGrow: 1,\n        flexBasis: '50%',\n        width: '50%'\n      }\n    },\n    content: {\n      padding: theme.spacing(8, 4, 3, 4)\n    },\n    icon: {\n      backgroundColor: colors.green[500],\n      color: theme.palette.common.white,\n      borderRadius: theme.shape.borderRadius,\n      padding: theme.spacing(1),\n      position: 'absolute',\n      top: -32,\n      left: theme.spacing(3),\n      height: 64,\n      width: 64\n    }\n  };\n});\n\nfunction LoginView() {\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      cookie = _useState2[0],\n      setCookie = _useState2[1];\n\n  var classes = useStyles();\n  var history = useHistory();\n\n  var handleSubmitSuccess = function handleSubmitSuccess() {\n    history.push('/app');\n  };\n\n  var auth = function auth() {\n    console.log(cookie);\n    fetch('https://djsupreme.herokuapp.com/auth/', {\n      method: 'POST',\n      // or 'PUT'\n      headers: {\n        'Content-Type': 'application/json',\n        'X-CSRFToken': cookie\n      },\n      body: JSON.stringify({\n        'username': 'jakbellamy',\n        'password': 'admin'\n      })\n    });\n  };\n\n  useEffect(function () {\n    // const csrftoken = ;\n    setCookie(Cookies.get('csrftoken'));\n    fetch('https://djsupreme.herokuapp.com/login/?next=/').then(function (res) {\n      return console.log(res.headers['set-cookie']);\n    }).then(setCookie(Cookies.get('csrftoken'))).then(auth()).then(console.log(cookie));\n  }, []); // console.log(cookie)\n\n  return (\n    /*#__PURE__*/\n    React.createElement(Page, {\n      className: classes.root,\n      title: \"Login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 5\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(Container, {\n      maxWidth: \"sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(Card, {\n      className: classes.card,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(CardContent, {\n      className: classes.content,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(Typography, {\n      variant: \"h2\",\n      color: \"textPrimary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, \"Sign in\"),\n    /*#__PURE__*/\n    React.createElement(Box, {\n      mt: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(LoginForm, {\n      onSubmitSuccess: handleSubmitSuccess,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 15\n      }\n    }))))))\n  );\n}\n\nexport default LoginView;","map":{"version":3,"sources":["/Users/jakobbellamy/Dev/refactor/Report-Cards/src/src/views/auth/LoginView/index.js"],"names":["React","useState","useEffect","Cookies","Link","RouterLink","useHistory","Avatar","Button","Box","Container","Card","CardContent","CardMedia","Divider","Typography","colors","makeStyles","Alert","LockIcon","Page","OPEN_Logo","LoginForm","useStyles","theme","root","justifyContent","backgroundColor","palette","background","dark","display","height","minHeight","flexDirection","paddingBottom","paddingTop","backButton","marginLeft","spacing","card","overflow","position","flexGrow","flexBasis","width","content","padding","icon","green","color","common","white","borderRadius","shape","top","left","LoginView","cookie","setCookie","classes","history","handleSubmitSuccess","push","auth","console","log","fetch","method","headers","body","JSON","stringify","get","then","res"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Cookies from 'js-cookie'\nimport { Link as RouterLink } from 'react-router-dom';\nimport { useHistory } from 'react-router';\nimport { Avatar, Button, Box, Container, Card, CardContent, CardMedia, Divider, Link, Typography, colors, makeStyles } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport LockIcon from '@material-ui/icons/Lock';\nimport Page from 'src/src/components/Page';\nimport OPEN_Logo from 'src/src/components/OPEN_Logo';\nimport LoginForm from './LoginForm';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    justifyContent: 'center',\n    backgroundColor: theme.palette.background.dark,\n    display: 'flex',\n    height: '100%',\n    minHeight: '100%',\n    flexDirection: 'column',\n    paddingBottom: 80,\n    paddingTop: 80\n  },\n  backButton: {\n    marginLeft: theme.spacing(2)\n  },\n  card: {\n    overflow: 'visible',\n    display: 'flex',\n    position: 'relative',\n    '& > *': {\n      flexGrow: 1,\n      flexBasis: '50%',\n      width: '50%'\n    }\n  },\n  content: {\n    padding: theme.spacing(8, 4, 3, 4)\n  },\n  icon: {\n    backgroundColor: colors.green[500],\n    color: theme.palette.common.white,\n    borderRadius: theme.shape.borderRadius,\n    padding: theme.spacing(1),\n    position: 'absolute',\n    top: -32,\n    left: theme.spacing(3),\n    height: 64,\n    width: 64\n  }\n}));\n\nfunction LoginView() {\n  const [cookie, setCookie] = useState()\n  const classes = useStyles();\n  const history = useHistory();\n\n  const handleSubmitSuccess = () => {\n    history.push('/app');\n  };\n\n  const auth = () => {\n    console.log(cookie)\n    fetch('https://djsupreme.herokuapp.com/auth/', {\n      method: 'POST', // or 'PUT'\n      headers: {\n        'Content-Type': 'application/json',\n        'X-CSRFToken': cookie\n      },\n      body: JSON.stringify({\n        'username': 'jakbellamy',\n        'password': 'admin'\n      }),\n    })\n  }\n\n  useEffect(() => {\n    // const csrftoken = ;\n    setCookie(Cookies.get('csrftoken'))\n    fetch('https://djsupreme.herokuapp.com/login/?next=/')\n      .then(res => console.log(res.headers['set-cookie']))\n      .then(setCookie(Cookies.get('csrftoken')))\n      .then(auth())\n      .then(console.log(cookie))\n  }, []);\n\n  // console.log(cookie)\n  return (\n    <Page className={classes.root} title=\"Login\">\n      <Container maxWidth=\"sm\">\n        <Card className={classes.card}>\n          <CardContent className={classes.content}>\n            <Typography\n              variant=\"h2\"\n              color=\"textPrimary\"\n            >\n              Sign in\n            </Typography>\n            {/*<Typography*/}\n            {/*  variant=\"subtitle1\"*/}\n            {/*  color=\"textSecondary\"*/}\n            {/*>*/}\n            {/*  Sign in on the internal platform*/}\n            {/*</Typography>*/}\n            <Box mt={3}>\n              <LoginForm onSubmitSuccess={handleSubmitSuccess} />\n            </Box>\n          </CardContent>\n        </Card>\n      </Container>\n    </Page>\n  );\n}\n\nexport default LoginView;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _slicedToArray from \"/Users/jakobbellamy/Dev/refactor/Report-Cards/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jakobbellamy/Dev/refactor/Report-Cards/src/Report Card/src/Components/Data Components/DataBox/DataPoints/RetroData.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Grid } from '@material-ui/core';\nimport { DataBox } from '../DataBox';\nimport { valueKeyText, calculatePercentChange, printPercent, formatPercentAsString } from '../../DataFunctions';\nimport { TriDataBox } from '../TriDataBox';\nexport default function RetroDataGrid(props) {\n  var _this = this;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      cardData = _useState2[0],\n      setCardData = _useState2[1];\n\n  var data = props.data;\n  useEffect(function () {\n    var finalMonth = data.filter(function (x) {\n      return Number(x['Date'].split(' ')[1]) === 2020;\n    }).reverse()[0];\n    var comparableMonth = data.filter(function (x) {\n      return Number(x['Date'].split(' ')[1]) === 2019;\n    }).reverse()[0];\n    var _cardData = [];\n    var targetMetrics = ['Market Share', 'Supreme Volume', 'Office Volume'];\n\n    for (var _i = 0, _targetMetrics = targetMetrics; _i < _targetMetrics.length; _i++) {\n      var metric = _targetMetrics[_i];\n      var captions = ['', ''];\n      var valueKey = 'YTD ' + metric;\n\n      if (comparableMonth) {\n        captions = [finalMonth['Date'], comparableMonth['Date']];\n\n        var _percentChangeInt = calculatePercentChange(valueKey, finalMonth, comparableMonth);\n      } else if (finalMonth) {\n        captions = [finalMonth['Date'], ''];\n        var _percentChangeInt2 = 0;\n      } else {\n        captions = [];\n      }\n\n      var valueYTD = finalMonth && finalMonth[valueKey] ? printPercent(finalMonth[valueKey].toFixed(0)) : '';\n      var valueComp = comparableMonth && comparableMonth[valueKey] ? printPercent(comparableMonth[valueKey].toFixed(0)) : '';\n\n      _cardData.push([metric, valueYTD, valueComp, percentChangeInt.toFixed(1) + '%', captions]);\n    }\n\n    setCardData(_cardData);\n  });\n  return (\n    /*#__PURE__*/\n    React.createElement(Grid, {\n      container: true,\n      spacing: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 5\n      }\n    }, cardData.map(function (card) {\n      return (\n        /*#__PURE__*/\n        React.createElement(Grid, {\n          item: true,\n          xs: 6,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 9\n          }\n        },\n        /*#__PURE__*/\n        React.createElement(TriDataBox, {\n          title: card[0],\n          valueYTD: card[1],\n          valueComp: card[2],\n          differenceValue: card[3],\n          captions: card[4],\n          period: '2020 Year End',\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 11\n          }\n        }))\n      );\n    }))\n  );\n}","map":{"version":3,"sources":["/Users/jakobbellamy/Dev/refactor/Report-Cards/src/Report Card/src/Components/Data Components/DataBox/DataPoints/RetroData.js"],"names":["React","useEffect","useState","Grid","DataBox","valueKeyText","calculatePercentChange","printPercent","formatPercentAsString","TriDataBox","RetroDataGrid","props","cardData","setCardData","data","finalMonth","filter","x","Number","split","reverse","comparableMonth","_cardData","targetMetrics","metric","captions","valueKey","percentChangeInt","valueYTD","toFixed","valueComp","push","map","card"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Grid } from '@material-ui/core';\nimport { DataBox } from '../DataBox';\nimport { valueKeyText, calculatePercentChange, printPercent, formatPercentAsString } from '../../DataFunctions';\nimport { TriDataBox } from '../TriDataBox';\n\nexport default function RetroDataGrid(props) {\n  const [cardData, setCardData] = useState([])\n  const {data} = props;\n\n  useEffect(() => {\n    let finalMonth = data.filter(x => Number(x['Date'].split(' ')[1]) === 2020).reverse()[0]\n    let comparableMonth = data.filter(x => Number(x['Date'].split(' ')[1]) === 2019).reverse()[0]\n\n    let _cardData = []\n    const targetMetrics = ['Market Share', 'Supreme Volume', 'Office Volume']\n    for(let metric of targetMetrics){\n      let captions = ['', ''];\n\n      let valueKey = 'YTD ' + metric\n\n\n      if (comparableMonth) {\n        captions = [finalMonth['Date'], comparableMonth['Date']];\n        let percentChangeInt = calculatePercentChange(valueKey, finalMonth, comparableMonth);\n      } else if(finalMonth) {\n        captions = [finalMonth['Date'], '']\n        let percentChangeInt = 0;\n      } else {\n        captions = []\n      }\n\n      let valueYTD = finalMonth && finalMonth[valueKey] ? printPercent(finalMonth[valueKey].toFixed(0)) : '';\n      let valueComp = comparableMonth && comparableMonth[valueKey] ? printPercent(comparableMonth[valueKey].toFixed(0)) : '';\n\n      _cardData.push([metric, valueYTD, valueComp, percentChangeInt.toFixed(1) + '%', captions])\n    }\n    setCardData(_cardData)\n  })\n\n\n\n  return (\n    <Grid container spacing={3}>\n      {cardData.map(card => (\n        <Grid item xs={6}>\n          <TriDataBox\n            title={card[0]}\n            valueYTD={card[1]}\n            valueComp={card[2]}\n            differenceValue={card[3]}\n            captions={card[4]}\n            period={'2020 Year End'}\n            />\n        </Grid>\n      ))}\n    </Grid>\n\n  );\n}\n"]},"metadata":{},"sourceType":"module"}